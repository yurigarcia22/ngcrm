import { createClient } from '@supabase/supabase-js';

// Substitua pelo URL do seu Supabase
const supabaseUrl = 'https://ekzjsqheinpvebjfjims.supabase.co'; 
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVrempzcWhlaW5wdmViamZqaW1zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5OTIzNDMsImV4cCI6MjA2NjU2ODM0M30.HrBFnV6ve6po2GeitFXs55ensNljsXs-1aSVwdKHDDA'; // Coloque a sua chave anon aqui

const supabase = createClient(supabaseUrl, supabaseKey);

// Aguardar o evento de clique no botão "Entrar"
document.getElementById('signInButton').addEventListener('click', async () => {
    const email = document.getElementById('emailInput').value;
    const password = document.getElementById('passwordInput').value;

    // Usando Supabase para fazer login
    const { user, error } = await supabase.auth.signInWithPassword({
        email: email,
        password: password,
    });

    if (error) {
        document.getElementById('message').textContent = `Erro: ${error.message}`;
    } else {
        document.getElementById('welcomeMessage').textContent = `Bem-vindo, ${user.email}`;
        document.getElementById('signInButton').style.display = 'none';
        document.getElementById('signUpButton').style.display = 'none';
        document.getElementById('signOutButton').style.display = 'inline-block';
    }
});

// Aguardar o evento de clique no botão "Registrar"
document.getElementById('signUpButton').addEventListener('click', async () => {
    const email = document.getElementById('emailInput').value;
    const password = document.getElementById('passwordInput').value;

    // Usando Supabase para registrar um novo usuário
    const { user, error } = await supabase.auth.signUp({
        email: email,
        password: password,
    });

    if (error) {
        document.getElementById('message').textContent = `Erro: ${error.message}`;
    } else {
        document.getElementById('welcomeMessage').textContent = `Usuário registrado com sucesso, ${user.email}`;
    }
});

// Aguardar o evento de clique no botão "Sair"
document.getElementById('signOutButton').addEventListener('click', async () => {
    await supabase.auth.signOut();
    document.getElementById('signOutButton').style.display = 'none';
    document.getElementById('signInButton').style.display = 'inline-block';
    document.getElementById('signUpButton').style.display = 'inline-block';
    document.getElementById('message').textContent = 'Você foi desconectado';
});
